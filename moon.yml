$schema: 'https://moonrepo.dev/schemas/tasks.json'

type: 'application'
language: 'go'

project:
  name: 'temp'
  description: 'A very basic template for a Golang project'

tasks:
  clean:
    script: 'rm -rf bin'
  install:
    script: 'go mod download'
  test:
    command: 'go test ./...'
  build:
    env:
      CGO_ENABLED: '0'
      GOOS: 'linux'
      GOARCH: 'amd64'
    command: 'go build -ldflags="-s" -ldflags="-w" -gcflags="-N" -gcflags="-l" -o bin/app cmd/main.go'
    inputs:
      - 'cmd/main.go'
    outputs:
      - 'bin/app'
